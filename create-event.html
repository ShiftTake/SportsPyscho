<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sports Psycho ‚Ä¢ Create Event</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet"/>

  <!-- JavaScript modules -->
  <script src="js/api-client.js"></script>
  <script src="js/event-manager.js"></script>

  <style>
    :root {
      --psycho-purple: #5821a6;
      --psycho-deep: #2a0b58;
      --psycho-blue: #4ad2ff;
      --psycho-yellow: #ffdd57;
    }

    body {
      background: var(--psycho-purple);
      background-image: url("https://www.transparenttextures.com/patterns/pw-maze-black.png");
      font-family: 'Inter', sans-serif;
      color: white;
      padding-bottom: 100px;
    }

    .card {
      background: rgba(255, 255, 255, 0.14);
      border: 2px solid rgba(255, 255, 255, 0.18);
      border-radius: 24px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.35);
    }
  </style>
</head>

<body>

<!-- HEADER -->
<header class="px-4 py-4 flex items-center justify-between bg-[var(--psycho-deep)] shadow-xl sticky top-0 z-50">
  <a href="club.html" class="text-3xl text-[var(--psycho-yellow)]">‚Üê</a>
  <h1 class="text-xl font-extrabold">Create Event</h1>
  <div class="w-8"></div>
</header>

<!-- FORM CARD -->
<section class="px-4 mt-6">
  <div class="card p-6">

    <form id="create-event-form">
      <!-- Hidden club ID (would be passed from club page) -->
      <input type="hidden" name="clubId" id="clubId" value="">

      <!-- Event Name -->
      <div class="mb-5">
        <label class="text-sm font-semibold mb-1 block">Event Name</label>
        <input 
          type="text"
          name="name"
          placeholder="Pickleball Double Round"
          required
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        >
      </div>

      <!-- Date & Time -->
      <div class="mb-5">
        <label class="text-sm font-semibold mb-1 block">Date & Time</label>
        <input 
          type="datetime-local"
          name="dateTime"
          required
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        >
      </div>

      <!-- Location -->
      <div class="mb-5">
        <label class="text-sm font-semibold mb-1 block">Location</label>
        <input 
          type="text"
          name="location"
          placeholder="Sports Plex Court 4"
          required
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        >
        <p class="opacity-70 text-xs mt-1">Enter the venue name and specific location</p>
      </div>

      <!-- Max Participants -->
      <div class="mb-5">
        <label class="text-sm font-semibold mb-1 block">Maximum Participants</label>
        <input 
          type="number"
          name="maxParticipants"
          placeholder="12"
          min="1"
          required
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        >
      </div>

      <!-- Recurrence Options -->
      <div class="mb-5">
        <label class="text-sm font-semibold mb-1 block">Recurrence</label>
        <select 
          name="recurrence"
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        >
          <option value="one-time">One-time event</option>
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
          <option value="tournament">Tournament style</option>
        </select>
      </div>

      <!-- Recurrence End Date (shown when recurrence is not one-time) -->
      <div id="recurrence-options" class="mb-5 hidden">
        <label class="text-sm font-semibold mb-1 block">Recurrence End Date</label>
        <input 
          type="date"
          name="recurrenceEndDate"
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        >
        <p class="opacity-70 text-xs mt-1">When should the recurring events stop?</p>
      </div>

      <!-- Description -->
      <div class="mb-5">
        <label class="text-sm font-semibold mb-1 block">Description (Optional)</label>
        <textarea 
          name="description"
          rows="4"
          placeholder="A fun competitive pickleball event open to all skill levels..."
          class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
        ></textarea>
      </div>

      <!-- Create Button -->
      <button 
        type="submit"
        class="w-full bg-[var(--psycho-blue)] text-black py-3 rounded-xl text-lg font-bold shadow-xl hover:scale-[1.02] transition"
      >
        Create Event
      </button>
    </form>

  </div>
</section>

<!-- FOOTER NAV -->
<nav class="fixed bottom-0 left-0 w-full bg-[var(--psycho-deep)] py-3 shadow-2xl border-t border-white/20">
  <div class="flex justify-around text-xl">
    <a href="dashboard.html" class="opacity-80 hover:opacity-100">üè†</a>
    <a href="club.html" class="opacity-80 hover:opacity-100">‚õ≥</a>
    <a href="calendar.html" class="opacity-80 hover:opacity-100">üìÖ</a>
    <a href="search.html" class="opacity-80 hover:opacity-100">üîç</a>
    <a href="profile.html" class="opacity-80 hover:opacity-100">üë§</a>
  </div>
</nav>

<script>
  // Get club ID from URL params if available
  const urlParams = new URLSearchParams(window.location.search);
  const clubId = urlParams.get('clubId');
  if (clubId) {
    document.getElementById('clubId').value = clubId;
  }

  // Initialize the form with event manager
  if (typeof eventManager !== 'undefined') {
    eventManager.initializeCreateForm('create-event-form');
  }
</script>

</body>
</html>
