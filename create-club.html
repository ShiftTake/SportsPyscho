<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sports Sicko ‚Ä¢ Create Club</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --sicko-purple: #4c1d95;
      --sicko-dark: #1e1b4b;
      --sicko-blue: #0ea5e9;
      --sicko-neon: #a8ff35;
    }

    body {
      background: var(--sicko-purple);
      background-image: url("https://www.transparenttextures.com/patterns/pw-maze-black.png");
      font-family: 'Inter', sans-serif;
      color: white;
      padding-bottom: 100px;
    }

    .card {
      background: rgba(255, 255, 255, 0.14);
      border: 2px solid rgba(255, 255, 255, 0.18);
      border-radius: 24px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.35);
    }
  </style>
</head>

<body>

<!-- HEADER -->
<header class="px-4 py-4 flex items-center justify-between bg-[var(--sicko-dark)] shadow-xl sticky top-0 z-50">
  <a href="dashboard.html" class="text-3xl text-[var(--sicko-neon)]">‚Üê</a>
  <h1 class="text-xl font-extrabold">Create a Club</h1>
  <div class="w-8"></div>
</header>

<!-- FORM CARD -->
<section class="px-4 mt-6">
  <div class="card p-6">

    <!-- Club Name -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-1 block">Club Name</label>
      <input 
        id="club-name"
        type="text"
        placeholder="Pickleball Maniacs"
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      >
    </div>

    <!-- Sport Selector -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-1 block">Sport</label>
      <select 
        id="club-sport"
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      >
        <option>Pickleball</option>
        <option>Golf</option>
        <option>Tennis</option>
        <option>Basketball</option>
        <option>Football</option>
        <option>Flag Football</option>
        <option>Soccer</option>
        <option>Volleyball</option>
      </select>
    </div>

    <!-- Upload Image -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-2 block">Club Image</label>

      <div class="bg-white/20 border border-white/40 rounded-xl p-4 text-center cursor-pointer hover:bg-white/30 transition">
        <input type="file" id="club-image" accept="image/*" class="hidden">
        <p class="opacity-80" onclick="document.getElementById('club-image').click()">Tap to upload club cover image</p>
      </div>
    </div>

    <!-- Public / Private -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-2 block">Visibility</label>

      <div class="flex items-center space-x-4">
        <label class="flex items-center space-x-2">
          <input type="radio" name="visibility" id="visibility-public" value="public" checked>
          <span>Public</span>
        </label>

        <label class="flex items-center space-x-2">
          <input type="radio" name="visibility" id="visibility-private" value="private">
          <span>Private</span>
        </label>
      </div>
    </div>

    <!-- State Selection -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-1 block">State</label>
      <select 
        id="club-state"
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      >
        <option value="">Select State</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="TX">Texas</option>
        <option value="NY">New York</option>
        <!-- Add more states as needed -->
      </select>
    </div>

    <!-- City -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-1 block">City</label>
      <input 
        id="club-city"
        type="text"
        placeholder="Enter city name"
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      >
    </div>

    <!-- Location (Venue/Address) -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-1 block">Venue/Location</label>
      <input 
        id="club-location"
        type="text"
        placeholder="Sports Plex, 123 Main St"
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      >
      <p class="opacity-70 text-xs mt-1">Specific venue or meeting location.</p>
    </div>

    <!-- Description -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-1 block">Club Description</label>
      <textarea 
        id="club-description"
        rows="4"
        placeholder="Describe your club, skill levels, rules, or weekly events..."
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      ></textarea>
    </div>

    <!-- Invite Members by User ID -->
    <div class="mb-5">
      <label class="text-sm font-semibold mb-2 block">Invite Members (Optional)</label>
      <input 
        id="invite-members"
        type="text"
        placeholder="Enter User IDs separated by commas (e.g., user123, user456)"
        class="w-full px-4 py-3 text-black rounded-xl font-semibold shadow focus:outline-none"
      >
      <p class="opacity-70 text-xs mt-1">Invite specific users to join your club by their User ID.</p>
    </div>

    <!-- Create Button -->
    <button 
      id="create-club-btn"
      class="w-full bg-[var(--sicko-blue)] text-black py-3 rounded-xl text-lg font-bold shadow-xl hover:scale-[1.02] transition"
    >
      Create Club
    </button>

  </div>
</section>

<!-- JavaScript for Form Handling and API Integration -->
<script>
  /**
   * Sports Sicko - Club Creation Module
   * Handles club creation form validation and API submission
   * Developer: Maintains modular structure for easy backend integration
   */

  document.getElementById('create-club-btn').addEventListener('click', async function(e) {
    e.preventDefault();
    
    // Collect form data
    const clubData = {
      name: document.getElementById('club-name').value,
      sport: document.getElementById('club-sport').value,
      state: document.getElementById('club-state').value,
      city: document.getElementById('club-city').value,
      location: document.getElementById('club-location').value,
      description: document.getElementById('club-description').value,
      visibility: document.querySelector('input[name="visibility"]:checked').value,
      inviteMembers: document.getElementById('invite-members').value.split(',').map(id => id.trim()).filter(id => id),
      createdAt: new Date().toISOString(),
      ownerId: 'current-user-id' // Replace with actual user ID from auth
    };

    // Basic validation
    if (!clubData.name || !clubData.sport || !clubData.state || !clubData.city) {
      alert('Please fill in all required fields: Club Name, Sport, State, and City');
      return;
    }

    try {
      // API call to create club
      // In production, replace with actual API endpoint
      const response = await fetch('/api/clubs/create', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + localStorage.getItem('authToken') // Add auth token
        },
        body: JSON.stringify(clubData)
      });

      if (response.ok) {
        const result = await response.json();
        alert('Club created successfully!');
        // Redirect to the new club page
        window.location.href = `club.html?id=${result.clubId}`;
      } else {
        const error = await response.json();
        alert('Error creating club: ' + (error.message || 'Unknown error'));
      }
    } catch (error) {
      // For demo purposes without backend, store in localStorage
      console.log('Creating club with data:', clubData);
      
      // Store in localStorage for demo
      const clubs = JSON.parse(localStorage.getItem('clubs') || '[]');
      clubData.id = 'club-' + Date.now();
      clubs.push(clubData);
      localStorage.setItem('clubs', JSON.stringify(clubs));
      
      alert('Club created successfully! (Demo mode - stored locally)');
      window.location.href = 'club.html';
    }
  });

  // Image upload preview
  document.getElementById('club-image').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
      console.log('Image selected:', file.name);
      // In production, upload to server or cloud storage
    }
  });
</script>

<!-- FOOTER NAV -->
<nav class="fixed bottom-0 left-0 w-full bg-[var(--sicko-dark)] py-3 shadow-2xl border-t border-white/20">
  <div class="flex justify-around text-xl">
    <a href="dashboard.html" class="opacity-80 hover:opacity-100">üè†</a>
    <a href="club.html" class="opacity-80 hover:opacity-100">‚õ≥</a>
    <a href="calendar.html" class="opacity-80 hover:opacity-100">üìÖ</a>
    <a href="search.html" class="opacity-80 hover:opacity-100">üîç</a>
    <a href="profile.html" class="opacity-80 hover:opacity-100">üë§</a>
  </div>
</nav>

</body>
</html>